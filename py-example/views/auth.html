<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Authenticate</title>
  <link rel="stylesheet" href="/static/pico.min.css">
  <link rel="stylesheet" href="/static/styles.css">
  <style>
    div {
      display: grid;
      place-items: center;  
      position: fixed;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  
<div>
  <article style="max-width: 500px; width: 100%; padding: 2rem; border-radius: 1rem; margin: 1rem">
    {% if message %}
      <aside class="alert">{{ message }}</aside>
    {% endif %}
    <form action="/auth" method="POST">
      <h2 style="text-align: center">Authenticate</h2>
      <fieldset>
        <label for="email">Email</label>
        <input type="email" name="email" id="email" placeholder="me@example.org" required>
      </fieldset>
      <fieldset>
        <label for="password">Password</label>
        <input type="password" name="password" id="password" placeholder="************" required>
      </fieldset>
      <button type="submit" name="action" value="login">Log In</button>
      <a href="#" style="width: 100%; display: block; text-align: center" role="link" class="link" id="switch">Create an account</a>
    </form>
  </article>
</div>

<script>
  const usernameInput = document.createElement("input")
  usernameInput.type = "text"
  usernameInput.name = "username"
  usernameInput.id = "username"
  usernameInput.placeholder = "Enter a username"
  usernameInput.required = true
  const usernameLabel = document.createElement("label")
  usernameLabel.htmlFor = "username"
  usernameLabel.textContent = "Username"
  const usernameFieldset = document.createElement("username")
  usernameFieldset.appendChild(usernameLabel)
  usernameFieldset.appendChild(usernameInput)
  const btn = document.querySelector('button[type="submit"]')
  const switchA = document.getElementById("switch");

  let isRegistering = false

  switchA.addEventListener("click", () => {
    if (isRegistering) {
      usernameFieldset.remove()
      btn.textContent = "Log In"
      btn.value = "login"
      switchA.textContent = "Create an account"
    } else {
      btn.parentNode.insertBefore(usernameFieldset, btn)
      btn.textContent = "Create Account"
      btn.value = "register"
      switchA.textContent = "Log in"
    }
    isRegistering = !isRegistering
  })
</script>

</body>
</html>
